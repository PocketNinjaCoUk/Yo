var Yo=function(){"use strict";var e,n="modules",t=0,r=0,o=function(t){e=t.namespace||Yo,Yo.loadedState={},t.scriptRoot&&(n=t.scriptRoot),e[n]=e[n]||{},e.debugMode=t.debugMode||!1,e.debugScripts=t.debugScripts||void 0,e.debugVis=t.debugVis||void 0,e.debugMode&&(Yo.loadOrder=[])},d=function(){return a("Object",e.debugVis)},i=function(){return a("Array",e.debugScripts)&&e.debugScripts.length<1},u=function(n,t){e.debugMode&&(void 0===e.debugScripts||i()?t(n):i()||e.debugScripts.forEach(function(e){n.search(e)>-1&&t(n)}))},c=function(e){u(e,function(){console.log(e)})},a=function(e,n){return"[object "+e+"]"===Object.prototype.toString.call(n)},l=function(e,n){if(e.length===n.length){var t,r;for(t=0;t<e.length;t++)if(r=e[t],!a(n[t],r))return c("Error with value comparison: "+r+", EXPECTED: "+n[t]),!1;return!0}return!1},f=function(e){return e.slice(0)},s=function(){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(arguments[0][n]=arguments[e][n]);return arguments[0]},p=function(e,n,t){var r=e.split("."),o=n;t=t||!1;for(var d=0;d<r.length;d++){if(!o[r[d]])return!1;if(t&&d===r.length-1)return o;o=o[r[d]]}return o},g=function(e,n,t){var r=e.split("."),o=n;if(t=t||!1,r.length<2)return o[e]||(o[e]={}),t?n:o[e];for(var d=0;d<r.length;d++){if(o[r[d]]||(o[r[d]]={}),t&&d===r.length-1)return o;o=o[r[d]]}return o},h=function(){var o,i,a=[],h=!0,v=function(e){return p(e,Yo.loadedState)},b=function(e,n){s(g(e,Yo.loadedState),n)},S=function(o){var d=g(o,e[n],!0),i=o.split(".");i=i[i.length-1],v(o).loaded&&(d[i]=v(o).loadedFunc(),r+=1,c("YO.LOADED: "+o),u(o,function(){Yo.loadOrder.push(o)}),c("scripts ADDED: "+t+", LOADED: "+r),v(o).runAfterActivation())},E=function(t){return g(t,e[n])},A=function(e,n){n=n||o,b(n,s({loaded:!1,loadedFunc:function(){},runAfterActivation:function(){},dependedBy:[],dependencies:[]},g(n,Yo.loadedState)||{},e))},D=function(){return A({loaded:!0,loadedFunc:function(){c(o+" called and already loaded")}}),i.apply(null,a.map(function(e){return E(e)}))},Y=function(){for(var e,n=v(o).dependedBy,t=0;t<n.length;t++){e=n[t];for(var r=0;r<v(e).dependencies.length;r++)if(v(e).dependencies[r]===o){v(e).dependencies.splice(r,1),n.splice(t,1),t--,c("DEPENDENCY: "+e+" dependent on "+o);break}v(e).dependencies.length<1&&(v(e).loaded=!0,S(e))}},y=function(){var e,n=!0,t=v(o).dependencies;c("SCRIPTS: "+o+" dependent on ["+t.toString()+"]");for(var r=0;r<t.length;r++)e=t[r],p(e,Yo.loadedState)||A({},e),v(e).loaded?(t.splice(r,1),r--):(v(e).dependedBy.push(o),n=!1);n&&(v(o).loaded=!0)};if(l(arguments,["String","Array","Function"]))o=arguments[0].toLowerCase(),a=arguments[1],i=arguments[2],h=a.length<1;else{if(!l(arguments,["String","Function"]))return c("incorrect params added",arguments),!1;o=arguments[0].toLowerCase(),i=arguments[1]}c("YO.ADD: "+o),t+=1,d()&&e.debugVis.addNode(o),h?(A({loaded:!0,loadedFunc:i}),S(o),Y()):(A({loadedFunc:D,dependencies:f(a),runAfterActivation:function(){Y()}}),y(),S(o),d()&&a.forEach(function(n){e.debugVis.addEdge(o,n)}))};return{init:o,add:h,isTypeOf:a,argumentChecker:l,arrayClone:f,extend:s}}();