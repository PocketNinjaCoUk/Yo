var Yo=function(){"use strict";var e,n="modules",t=0,r=0,o=function(t){e=t.namespace||Yo,Yo.loadedState={},t.scriptRoot&&(n=t.scriptRoot),e[n]=e[n]||{},e.debugMode=t.debugMode||!1,e.debugScripts=t.debugScripts||void 0,e.debugMode&&(Yo.loadOrder=[]),e.globalDependencies=t.globalDependencies||void 0},d=function(){return u("Array",e.debugScripts)&&e.debugScripts.length<1},i=function(n,t){e.debugMode&&(void 0===e.debugScripts||d()?t(n):d()||e.debugScripts.forEach(function(e){n.search(e)>-1&&t(n)}))},c=function(e){i(e,function(){console.log(e)})},u=function(e,n){return"[object "+e+"]"===Object.prototype.toString.call(n)},a=function(e,n){if(e.length===n.length){var t,r;for(t=0;t<e.length;t++)if(r=e[t],!u(n[t],r))return c("Error with value comparison: "+r+", EXPECTED: "+n[t]),!1;return!0}return!1},l=function(e){return e.slice(0)},f=function(){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(arguments[0][n]=arguments[e][n]);return arguments[0]},s=function(e,n,t){var r;r=u("Array",e)?e[1].split("."):e.split(".");var o=n;t=t||!1;for(var d=0;d<r.length;d++){if(!o[r[d]])return!1;if(t&&d===r.length-1)return o;o=o[r[d]]}return o},p=function(e,n,t){var r;r=u("Array",e)?e[1].split("."):e.split(".");var o=n;if(t=t||!1,r.length<2)return o[e]||(o[e]={}),t?n:o[e];for(var d=0;d<r.length;d++){if(o[r[d]]||(o[r[d]]={}),t&&d===r.length-1)return o;o=o[r[d]]}return o};return{init:o,add:function(){var o,d,u=[],l=!0,g=function(e){return s(e,Yo.loadedState)},v=function(e,n){f(p(e,Yo.loadedState),n)},h=function(o){var d=p(o,e[n],!0),u=o.split(".");u=u[u.length-1],g(o).loaded&&(d[u]=g(o).loadedFunc(),r+=1,c("YO.LOADED: "+o),i(o,function(){Yo.loadOrder.push(o)}),c("scripts ADDED: "+t+", LOADED: "+r),g(o).runAfterActivation())},b=function(t){return p(t,e[n])},D=function(e,n){n=n||o,v(n,f({loaded:!1,loadedFunc:function(){},runAfterActivation:function(){},dependedBy:[],dependencies:[]},p(n,Yo.loadedState)||{},e))},S=function(){D({loaded:!0,loadedFunc:function(){c(o+" called and already loaded")}});var e={};return Y(u).map(function(n){e[n[0]]=b(n[1])}),d.apply(null,[e])},y=function(){for(var e,n=g(o).dependedBy,t=0;t<n.length;t++){e=n[t];for(var r=0;r<g(e).dependencies.length;r++)if(g(e).dependencies[r][1]===o){g(e).dependencies.splice(r,1),n.splice(t,1),t--,c("DEPENDENCY: "+e+" dependent on "+o);break}g(e).dependencies.length<1&&(g(e).loaded=!0,h(e))}},A=!0,O=function(e){return Object.keys(e).length<1},Y=function(e){for(var n=Object.keys(e),t=[],r=0;r<n.length;r+=1)t.push([n[r],e[n[r]]]);return t};if(a(arguments,["String","Object","Function"]))o=arguments[0],u=arguments[1],e.globalDependencies&&(u=f({},u,e.globalDependencies)),d=arguments[2],l=O(u);else if(a(arguments,["String","Function"]))o=arguments[0],d=arguments[1],e.globalDependencies&&!function(e,n){for(var t=Object.keys(e),r=0;r<t.length;r+=1)if(e[t[r]]===n)return!0;return!1}(e.globalDependencies,o)&&(u=f({},e.globalDependencies),l=O(u));else{if(!a(arguments,["String"]))return c("incorrect params added"),!1;o=arguments[0],A=!1}c("YO.ADD: "+o),t+=1,l?(D({loaded:!0,loadedFunc:d}),A&&h(o),y()):(D({loadedFunc:S,dependencies:Y(u),runAfterActivation:function(){y()}}),function(){var e,n,t=!0,r=g(o).dependencies;c("SCRIPTS: "+o+" dependent on ["+r.toString()+"]");for(var d=0;d<r.length;d++)e=r[d],n=e[1],s(n,Yo.loadedState)||D({},n),g(n).loaded?(r.splice(d,1),d--):(g(n).dependedBy.push(o),t=!1);t&&(g(o).loaded=!0)}(),h(o))},isTypeOf:u,argumentChecker:a,arrayClone:l,extend:f}}();