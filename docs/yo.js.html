<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>JSDoc: pocketninja Source: yo.js</title>

  <script src="scripts/prettify/prettify.js"> </script>
  <script src="scripts/prettify/lang-css.js"> </script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">

  <script src="scripts/jquery-2.1.4.min.js"></script>
  <script src="scripts/sub-nav.js"></script>
  <script src="scripts/class-maker.js"></script>
  <script src="scripts/side-menu.js"></script>
</head>

<body class="page" data-class-maker='{"text": "Source: yo.js", "generateSelectedData": true}'>
  <div id="main" class="main">
    <h1 class="page-title">Source: yo.js</h1>
    



    
<section>
  <article>
    <div class="prettyprint-wrapper">
      <pre class="prettyprint source linenums">
        <code>


/**
 * Yo, the single page dependency management script created by pocketninja for his own amusement
 *
 * @module Yo
 * @returns {object} public functions
 */
var Yo = function() {
  // namespace.loadedState.tooltip.{
  //    loaded: boolean
  //    loadedFunc: function
  //    dependedBy: [string],
  //    dependencies: [string]
  // }

  /**
   * container of the namespace object provided by the user with Yo.init()
   * @private
   * @var {object} ns
   */
  var ns;


  /**
   * After creating Yo you need to provide it with your main namespace to any level within it. Like "company" or "company.cool.scripts"
   *
   * @method init
   * @param {object} data - initial data object.
   * @param {object} data.namespace - users main script namespace.
   *
   * @example
   * Yo.init({
   *   namespace: your.script.name.space
   * });
   */
  var init = function(data){
    ns = data.namespace;
    ns.loadedState = {};
    ns.scripts = {};
  };

  var isTypeOf = function(str, obj) {
    return '[object ' + str + ']' === Object.prototype.toString.call(obj);
  };

  var argumentChecker = function(args, argSequence) {
    if(args.length === argSequence.length) {
      var i, val;
      for (i = 0; i &lt; args.length; i++) {
        val = args[i];
        if (!isTypeOf(argSequence[i], val))   {
          console.log('Error with value comparison: ' + val + ', EXPECTED: ' + argSequence[i] );
          return false;
        }
      }

      return true;
    }
    else {
      return false;
    }
  };

  var arrayClone = function(arr) {
    return arr.slice(0);
  };

  var extend = function() {
    for(var i=1; i &lt; arguments.length; i++) {
      for(var key in arguments[i]) {
        if(arguments[i].hasOwnProperty(key)) {
          arguments[0][key] = arguments[i][key];
        }
      }
    }
    return arguments[0];
  };

  //var namespaceManager = function(script) {
  //  var arr = script.split('.');
  //  var setNameSpace = function(level, index) {
  //    var newLevel;
  //    if(!level &amp;&amp; index &lt; arr.length) {
  //      level = {};
  //      newLevel = level[arr[index]];
  //      index++;
  //      setNameSpace(newLevel, index);
  //    }
  //  };
  //
  //  if(arr.length > 1) {
  //    setNameSpace(ns.loadedState[arr[0]], 0);
  //  }
  //};


  /**
   * For adding new scripts with their own dependencies
   *
   * @method add
   * @param {string} scriptName Script name
   * @param {array} [scriptDependencies=undefined] Script list of dependencies
   * @param {function} scriptCallback Script module callback
   *
   * @example
   * Yo.add('WidgetName', ['dependency1', 'dependency2', 'etc'], function() {
   *   // your code in here
   *   return {}
   * });
   */
  var add = function() {

    var scriptName;
    var scriptDependencies = [];
    var scriptCallback;
    var hasNoDependencies = true;

    var createOrEditLoadedState = function(data, script) {
      script = script || scriptName;
      ns.loadedState[script] = extend({
        loaded: false,
        loadedFunc: function(){},
        dependedBy: [],
        dependencies: []
      }, ns.loadedState[script], data);
    };

    /**
     * Callback added to loadState[scriptName].loadedFunc which is run once all of it's dependencies have loaded
     *
     * @function pushFunction
     * @private
     */
    var pushFunction = function() {
      createOrEditLoadedState({
        loaded: true,
        loadedFunc: function() { console.log(scriptName + ' called and already loaded'); }
      });
      return scriptCallback.apply(null, scriptDependencies.map(function(_scriptName) {
        return ns.scripts[_scriptName];
      }));
    };

    var activateScript = function(script) {
      if(ns.loadedState[script].loaded) {
        ns.scripts[script] = ns.loadedState[script].loadedFunc();
      }
    };


    var checkDependedBy = function() {
      var dependedBy = ns.loadedState[scriptName].dependedBy;

      dependedBy.forEach(function(otherScript) {
        for(var i = 0; i &lt; dependedBy.length; i++) {
          if (ns.loadedState[otherScript].dependencies[i] === scriptName) {
            ns.loadedState[otherScript].dependencies.splice(i, 1);
            dependedBy.splice(i, 1);
            break;
          }
        }

        if (ns.loadedState[otherScript].dependencies.length &lt; 1) {
          ns.loadedState[otherScript].loaded = true;
          activateScript(otherScript);
        }
      });
    };


    var checkDependencies = function() {
      var allDependenciesLoaded = true;
      var scriptDependents = ns.loadedState[scriptName].dependencies;
      var dependencyScriptName;

      var looper = function() {
        for(var i = 0; i &lt; scriptDependents.length; i++) {
          dependencyScriptName = scriptDependents[i];
          // If script name loadState doesn't
          // exist then create one
          if(!ns.loadedState[dependencyScriptName]) {
            createOrEditLoadedState({}, dependencyScriptName);
          }

          if(!ns.loadedState[dependencyScriptName].loaded) {
            ns.loadedState[dependencyScriptName].dependedBy.push(scriptName);
            allDependenciesLoaded = false;
          }
          else {
            scriptDependents.splice(i, 1);
            looper();
            break;
          }
        }
      };

      looper();

      if(allDependenciesLoaded) {
        ns.loadedState[scriptName].loaded = true;
      }
    };


    if(argumentChecker(arguments, ['String', 'Array', 'Function'])) {
      scriptName = arguments[0].toLowerCase();
      scriptDependencies = arguments[1];
      scriptCallback = arguments[2];
      hasNoDependencies = scriptDependencies.length &lt; 1;
    }
    else if(argumentChecker(arguments, ['String', 'Function'])) {
      scriptName = arguments[0].toLowerCase();
      scriptCallback = arguments[1];
    }
    else {
      console.log('incorrect params added', arguments);
      return false;
    }

    console.log('YO.ADD: ' + scriptName);

    if (hasNoDependencies) {
      //namespaceManager(scriptName);
      createOrEditLoadedState({
        loaded: true,
        loadedFunc: scriptCallback
      });
      activateScript(scriptName);
      checkDependedBy();
    }
    else {
      //namespaceManager(scriptName);
      createOrEditLoadedState({
        loadedFunc: pushFunction,
        dependencies: arrayClone(scriptDependencies)
      });
      checkDependencies();
      activateScript(scriptName);
      checkDependedBy();
    }
  };

  return {
    init: init,
    add: add,
    isTypeOf: isTypeOf,
    argumentChecker: argumentChecker,
    arrayClone: arrayClone,
    extend: extend
  }
}();</code>
      </pre>
    </div>
  </article>
</section>




  </div>

  <div id="subNav" class="sub-nav">
    <div class="shuriken"></div>
  </div>

  <nav id="sideNav" class="side-nav">
    <div class="logo"></div>
    <h2 class="nav-home"><a href="index.html">Home</a></h2><h3 class="side-menu-item-heading">Modules</h3><ul class="side-menu-modules-list"><li class="side-menu-item book"><a href="module-Book.html">Book</a></li><li class="side-menu-item dropdown"><a href="module-Dropdown.html">Dropdown</a></li><li class="side-menu-item egg"><a href="module-Egg.html">Egg</a></li><li class="side-menu-item yo"><a href="module-Yo.html">Yo</a></li></ul><h3 class="side-menu-item-heading">Namespaces</h3><ul class="side-menu-namespaces-list"><li class="side-menu-item companyname"><a href="CompanyName.html">CompanyName</a></li></ul>
    <img src="styles/img/ninja-in-tree.jpg" class="side-nav-ninja">
  </nav>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed Dec 30 2015 17:47:26 GMT-0800 (Pacific Standard Time)
    <p>Pocketninja 1.0 Theme Dec/2015 with additional class control and javascript features created by <a href="http://www.pocketninja.co.uk" target="_blank">pocketninja</a></p>
    <p>Github account <a href="https://github.com/eyeamaman" target="_blank">eyeamaman</a></p>
  </footer>

  <script> prettyPrint(); </script>
  <script src="scripts/linenumber.js"> </script>
</body>
</html>